<!doctype html>
<html lang="en">

<head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
        .center {
            margin-left: 25%;
            margin-top: 25%;
            margin-right: 25%;
            position: relative;
        }
        
        .hidden {
            display: none;
        }
        
        .text-center {
            text-align: center;
            vertical-align: middle;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row center hidden" style="margin-top: 10%" id="thong_tin">
            <div class="col-lg-6">
                <h3 class="">Thông tin thí sinh</h3>
                <div class="row">
                    <div>
                        Họ tên :
                    </div>
                    <div>
                        <div id="ho_ten"></div>
                    </div>
                </div>
                <div class="row">
                    <div>
                        MSSV:
                    </div>
                    <div>
                        <div id="ma_sv"></div>
                    </div>
                </div>
                <div class="row">
                    <div>
                        Số CMND:
                    </div>
                    <div>
                        <div id="cmnd"></div>
                    </div>
                </div>
                <div class="row">
                    <div>
                        Lớp:
                    </div>
                    <div>
                        <div id="lop"></div>
                    </div>
                </div>
                <div class="row">
                    <div>
                        Khoa:
                    </div>
                    <div>
                        <div id="khoa"></div>
                    </div>
                </div>
                <div class="row">
                    <div>
                        Ngày sinh:
                    </div>
                    <div>
                        <div id="ngay_sinh"></div>
                    </div>
                </div>
                <div class="row">
                    <div>
                        Giới tính:
                    </div>
                    <div>
                        <div id="gioi_tinh"></div>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <h3 class="">Thông tin bài thi</h3>
                <div class="row">
                    <div>
                        Mã đề :
                    </div>
                    <div>
                        <div id="ma_de_thi"></div>
                    </div>
                </div>
                <div class="row">
                    <div>
                        Chủ đề:
                    </div>
                    <div>
                        <div id="chu_de"></div>
                    </div>
                </div>
                <div class="row">
                    <div>
                        Thời gian:
                    </div>
                    <div>
                        <div id="thoi_gian"></div>
                    </div>
                </div>
                <div class="row">
                    <div>
                        Số câu hỏi:
                    </div>
                    <div>
                        <div id="so_cau_hoi"></div>
                    </div>
                </div>
            </div>
            <button type="button" class="btn btn-primary" style="width: 100%;height: 50px;" id="bat_dau_thi">Bắt đầu làm bài</button>
        </div>

    </div>
    <div class="row">
        <div class="col-lg-2">
        </div>
        <div class="col-lg-8">
            <div class="center">
                <div class="form-group" id="nhap_ma_de">
                    <label id="thong_bao" for="ma_de">Nhập mã đề</label>
                    <input type="text" class="form-control" name="" id="ma_de" aria-describedby="helpId" placeholder="Nhập mã đề">
                    <button type="button" style="width: 100%" class="btn btn-primary" id="dong_y">Đồng ý</button>

                </div>
            </div>
        </div>
        <div class="col-lg-2">
        </div>
    </div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="Xu_ly/Xu_ly_3L.js"></script>
    <script>
        var baiThi = Doc_Danh_sach_De_thi().Danh_sach_De_thi;
        var sinhVien = Doc_Danh_sach_Sinh_vien().Danh_sach_Sinh_vien;
        var maDe = document.getElementById("ma_de");
        var mssv = sessionStorage.getItem("mssv");
        //console.log(mssv)
        var baiThi;

        function kiemTraMaDe(maDe) {
            var flag = 0;
            baiThi.forEach(x => {
                if (x.MaDe == maDe) {
                    baiThi = x;
                    sessionStorage.setItem("ma_de", x.MaDe)
                    flag++;
                }

            })
            if (flag != 0) {
                return true;
            } else {
                return false;
            }
        }

        function getInfoStudent(mssvs) {
            var y;
            sinhVien.forEach(x => {
                if (x.MSSV == mssvs) {
                    y = x;
                }
            })
            return y;
        }
        dong_y.onclick = () => {
            if (kiemTraMaDe(maDe.value) == true) {
                var thiSinh = getInfoStudent(mssv);
                //console.log(thiSinh);
                ma_de_thi.innerHTML = baiThi.MaDe;
                chu_de.innerHTML = baiThi.ChuDe;
                thoi_gian.innerHTML = baiThi.ThoiGian;
                so_cau_hoi.innerHTML = baiThi.CauHoi.length;
                ho_ten.innerHTML = thiSinh.Ho_ten;
                ma_sv.innerHTML = thiSinh.MSSV;
                cmnd.innerHTML = thiSinh.CMND;
                lop.innerHTML = thiSinh.Lop.Ten_lop;
                ngay_sinh.innerHTML = thiSinh.Ngay_sinh;
                khoa.innerHTML = thiSinh.Lop.Khoa;
                gioi_tinh.innerHTML = thiSinh.Gioi_tinh;
                //console.log(baiThi)
                //console.log(thiSinh)
                document.getElementById("nhap_ma_de").classList.add('hidden');
                document.getElementById("thong_tin").classList.remove('hidden');

            } else {
                thong_bao.innerHTML = "Mã đề không tồn tại"
            }
        }
        bat_dau_thi.onclick = () => {
            document.location.href = "take_exam.html";
        }
    </script>
</body>

</html>